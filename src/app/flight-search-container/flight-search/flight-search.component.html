<div class="container">
  <form [formGroup]="flightForm" (ngSubmit)="onSubmit(flightForm.value)">
    <mat-form-field class="form-field">
      <mat-label
        class="label"
        [ngClass]="{ 'correct-input': flightForm.controls['from'].valid }"
        >From</mat-label
      >
      <input matInput type="text" formControlName="from" />
      <mat-hint class="hint">Departure city</mat-hint>
      <mat-error class="error" *ngIf="hasError('from', 'required')"
        >From is a <strong>required field.</strong></mat-error
      >
    </mat-form-field>

    <mat-form-field class="form-field">
      <mat-label
        class="label"
        [ngClass]="{ 'correct-input': flightForm.controls['to'].valid }"
        >To</mat-label
      >
      <input matInput type="text" formControlName="to" />
      <mat-error class="error" *ngIf="hasError('to', 'required')"
        >To is a <strong>required field.</strong></mat-error
      >
      <mat-hint class="hint">Landing city</mat-hint>
      <mat-error class="error">From and To should be different.</mat-error>
    </mat-form-field>

    <mat-form-field class="form-field">
      <mat-label
        class="label"
        [ngClass]="{ 'correct-input': flightForm.controls['fromDate'].valid }"
        >Choose a date</mat-label
      >
      <input matInput [matDatepicker]="pickerFrom" formControlName="fromDate" />
      <mat-datepicker-toggle matSuffix [for]="pickerFrom">
        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker #pickerFrom></mat-datepicker>
      <mat-hint class="hint">From date</mat-hint>
      <mat-error class="error" *ngIf="hasError('fromDate', 'atPast')"
        >Cannot be in the past.</mat-error
      >
    </mat-form-field>

    <mat-form-field class="form-field">
      <mat-label
        class="label"
        [ngClass]="{ 'correct-input': flightForm.controls['toDate'].valid }"
        >Choose a date</mat-label
      >
      <input matInput [matDatepicker]="pickerTo" formControlName="toDate" />
      <mat-datepicker-toggle matSuffix [for]="pickerTo">
        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker #pickerTo></mat-datepicker>
      <mat-hint class="hint">To date</mat-hint>
      <mat-error class="error" *ngIf="hasError('toDate', 'beforeDeparture')"
        >Cannot be before departure date.</mat-error
      >
    </mat-form-field>

    <mat-form-field class="form-field">
      <mat-label
        class="label"
        [ngClass]="{ 'correct-input': flightForm.controls['stops'].valid }"
        >Stops</mat-label
      >
      <input matInput type="number" formControlName="stops" />
      <mat-error class="error" *ngIf="hasError('stops', 'required')"
        >Stops is a <strong>required field.</strong></mat-error
      >
      <mat-error class="error" *ngIf="hasError('stops', 'min')"
        >Should be equal or greater than 0.</mat-error
      >
      <mat-error class="error" *ngIf="hasError('stops', 'max')"
        >Should be lower than 4.</mat-error
      >
      <mat-hint class="hint">Number of connections</mat-hint>
    </mat-form-field>
    <div class="btn-container">
      <button
        [ngClass]="{ 'btn-no-valid': !flightForm.valid }"
        type="submit"
        class="submit-btn"
        [disabled]="!flightForm.valid"
      >
        Find Flights
      </button>
    </div>
  </form>
</div>
